/*! HelpSmith Web Help System 2.2
* http://www.helpsmith.com
* Copyright (c) 2007-2016 Divcom Software */
var tSearchMatch={ALLWORDS:{value:0},EXACT:{value:1},PHRASE:{value:2}};function tWordIndex(a,b,c){this.index=a;this.exactMatch=b;this.indexInTerm=c;this.clone=function(){return new tWordIndex(this.index,this.exactMatch,this.indexInTerm)}}function searchResultItem(a,b){this.searchEngine=a;this.topicIndex=b;this.wordIndexes=[];this.rank=0} searchResultItem.prototype={getTitle:function(){return gTopicTable[this.topicIndex][2]},getRef:function(a){var b=gTopicTable[this.topicIndex][3];if("undefined"!==typeof a&&""!=a){var c="";if(this.searchEngine.searchMatch==tSearchMatch.PHRASE)for(var d=0;d<this.searchEngine.searchWords.length;d++)var e=this.searchEngine.searchWords[d],c=c+(e.leadDelim+e.word);else for(d=0;d<this.wordIndexes.length;d++)c+=gWordIndex[this.wordIndexes[d].index][0]+"["+this.wordIndexes[d].indexInTerm+"]";b+="?"+a+"="+ escape(c)}return b},addWordIndex:function(a){var b=arrayFindItem(this.wordIndexes,a,function(a,b){return a.index-b.index});b.found?(b=this.wordIndexes[b.index],!b.exactMatch&&a.exactMatch&&(b.exactMatch=!0,b.indexInTerm=a.indexInTerm,this.rank-=1,this.rank+=1E3)):(this.wordIndexes.splice(b.index,0,a.clone()),this.rank=a.exactMatch?this.rank+1E3:this.rank+1)}};function searchEngine(){this.searchWords=[];this.searchMatch=null;this.resultItems=[]} searchEngine.prototype={parseQuery:function(a,b){this.searchWords=[];var c=$.trim(a),d,e=!1;'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)?(d=!1,e=b=!0):"["==c.charAt(0)&&"]"==c.charAt(c.length-1)&&(d=!0,b=!1,e=!0);this.searchMatch=b?tSearchMatch.PHRASE:d?tSearchMatch.EXACT:tSearchMatch.ALLWORDS;e&&(c=c.substring(1,c.length-1));if(0==c.length)return!1;c=c.replace(/(\s+)/g," ");c=c.replace(/^\s+|\s+$/g,"");d=/([^\s\.;,:()_{}"\/\\|<>!\?\[\]\-\+\*=%&@#]+)([\s\.;,:()_{}"\/\\|<>!\?\[\]\-\+\*=%&@#])?/g;for(var f= "";e=d.exec(c);){var g={word:e[1].toLowerCase(),leadDelim:f},f=e[2];this.searchWords.push(g)}return 0<this.searchWords.length},getAlphaIndexes:function(a){a=arrayFindItem(gAlphaIndex,a.charAt(0),function(a,b){return compareStrings(a[0],b)});var b={start:-1,end:-1};return a.found&&(b.start=gAlphaIndex[a.index][1],b.end=gAlphaIndex[a.index][2],0<=b.start&&b.start<=b.end)?b:null},findWordPart:function(a,b){var c=this.getAlphaIndexes(a);if(!c)return null;for(var d=[],e=c.start;e<=c.end;e++){var f=gWordIndex[e][0]; f.substr(0,a.length)==a&&d.push(new tWordIndex(e,f.length==a.length,b))}return 0==d.length?null:d},findMasterWord:function(a){var b=this.getAlphaIndexes(a);if(!b)return-1;a=arrayFindItem(gWordIndex,a,function(a,b){return compareStrings(a[0],b)},!1,b.start,b.end);return a.found?a.index:-1},mergePhraseIndex:function(a){if(1<a.length){for(var b=[],c=a[a.length-1],d=0;d<c.length;d++){for(var e=c[d],f=0;f<a.length-1;f++){for(var g=!1,h=0;h<a[f].length;h++)if(a[f][h]==e){g=!0;break}if(!g)break}g&&b.push(e)}return b}return 0< a.length?a[0]:null},getSequenceTopicIndex:function(a,b,c){var d=!1,e=this.findMasterWord(b.word);if(0<=e){a=gWordIndex[a][2];for(var f=0;f<a.length;f++){var g="string"==typeof a[f][1],h=" ";g&&(h=a[f][1]);if(a[f][0]==e&&h==b.leadDelim){g?c.push(a[f][2]):c.push(a[f][1]);d=!0;break}}d||(e=-1)}return e},findPhrase:function(){for(var a=[],b=-1,c=0;c<this.searchWords.length;c++)if(0>b?(b=this.findMasterWord(this.searchWords[c].word),0<=b&&a.push(gWordIndex[b][1])):b=this.getSequenceTopicIndex(b,this.searchWords[c], a),0>b){a=[];break}if(a=this.mergePhraseIndex(a))for(c=0;c<a.length;c++)this.getResultItem(a[c])},findExactWords:function(){for(var a=0;a<this.searchWords.length;a++){var b=this.findMasterWord(this.searchWords[a].word);0<=b&&this.createResultItems([new tWordIndex(b,!0,a)])}},findPartsOfWords:function(){for(var a=0;a<this.searchWords.length;a++){var b=this.findWordPart(this.searchWords[a].word,a);b&&this.createResultItems(b)}},createResultItems:function(a){for(var b=0;b<a.length;b++)for(var c=gWordIndex[a[b].index][1], d=0;d<c.length;d++)this.getResultItem(c[d]).addWordIndex(a[b])},getResultItem:function(a){var b=arrayFindItem(this.resultItems,a,function(a,b){return a.topicIndex-b});if(b.found)return this.resultItems[b.index];a=new searchResultItem(this,a);this.resultItems.splice(b.index,0,a);return a},findWords:function(){this.resultItems=[];switch(this.searchMatch){case tSearchMatch.PHRASE:this.findPhrase();break;case tSearchMatch.EXACT:this.findExactWords();break;default:this.findPartsOfWords()}return 0<this.resultItems.length}, search:function(a,b){this.parseQuery(a,b)&&this.findWords();return 0<this.resultItems.length}};